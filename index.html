<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlidesLive Picture-in-Picture Bookmarklet</title>
    <style>
      html, body, div {
        text-align: center;
        margin: 0 auto;
        padding: 0;
        font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif;
        color: #333;
      }
      #main {
        max-width: 630px;
        margin: 3em auto;
      }
      .bookmarklet {
        display: inline-block;
        padding: .5em 1em;
        color: #fff;
        background: #50dcf3;
        border-radius: 4px;
        text-decoration: none;
      }
      a {
        color: #50dcf3;
      }
      .dim {
        color: #999;
      }
      .bookmarkContainer {
        padding: 30px;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>SlidesLive Picture-in-Picture Bookmarklet</h1>
      <div class="bookmarkContainer">
        <p>
          <a class="bookmarklet" href="javascript:(function(){!function(e)%7Bvar%20t%3D%7B%7D%3Bfunction%20n(i)%7Bif(t%5Bi%5D)return%20t%5Bi%5D.exports%3Bvar%20o%3Dt%5Bi%5D%3D%7Bi%3Ai%2Cl%3A!1%2Cexports%3A%7B%7D%7D%3Breturn%20e%5Bi%5D.call(o.exports%2Co%2Co.exports%2Cn)%2Co.l%3D!0%2Co.exports%7Dn.m%3De%2Cn.c%3Dt%2Cn.d%3Dfunction(e%2Ct%2Ci)%7Bn.o(e%2Ct)%7C%7CObject.defineProperty(e%2Ct%2C%7Benumerable%3A!0%2Cget%3Ai%7D)%7D%2Cn.r%3Dfunction(e)%7B%22undefined%22!%3Dtypeof%20Symbol%26%26Symbol.toStringTag%26%26Object.defineProperty(e%2CSymbol.toStringTag%2C%7Bvalue%3A%22Module%22%7D)%2CObject.defineProperty(e%2C%22__esModule%22%2C%7Bvalue%3A!0%7D)%7D%2Cn.t%3Dfunction(e%2Ct)%7Bif(1%26t%26%26(e%3Dn(e))%2C8%26t)return%20e%3Bif(4%26t%26%26%22object%22%3D%3Dtypeof%20e%26%26e%26%26e.__esModule)return%20e%3Bvar%20i%3DObject.create(null)%3Bif(n.r(i)%2CObject.defineProperty(i%2C%22default%22%2C%7Benumerable%3A!0%2Cvalue%3Ae%7D)%2C2%26t%26%26%22string%22!%3Dtypeof%20e)for(var%20o%20in%20e)n.d(i%2Co%2Cfunction(t)%7Breturn%20e%5Bt%5D%7D.bind(null%2Co))%3Breturn%20i%7D%2Cn.n%3Dfunction(e)%7Bvar%20t%3De%26%26e.__esModule%3Ffunction()%7Breturn%20e.default%7D%3Afunction()%7Breturn%20e%7D%3Breturn%20n.d(t%2C%22a%22%2Ct)%2Ct%7D%2Cn.o%3Dfunction(e%2Ct)%7Breturn%20Object.prototype.hasOwnProperty.call(e%2Ct)%7D%2Cn.p%3D%22%22%2Cn(n.s%3D0)%7D(%5Bfunction(e%2Ct)%7B(()%3D%3E%7Bconst%20e%3D()%3D%3Edocument.getElementsByTagName(%22video%22)%5B0%5D%2Ct%3D()%3D%3E%7Blet%20e%3Ddocument.querySelector(%22.slp__slidesPlayer__content%20img%22)%3Bif(e%20instanceof%20HTMLImageElement)return%20e%3Bif(e%3Ddocument.getElementsByTagName(%22video%22)%5B1%5D%2Ce%20instanceof%20HTMLVideoElement)return%20e.width%3De.videoWidth%2Ce.height%3De.videoHeight%2Ce%3Bthrow%20Error(%22Slide%20image%20not%20found.%22)%7D%3Bif((()%3D%3E%7Bif(%22slideslive.com%22%3D%3D%3Dlocation.hostname)return!1%3Bconst%5Be%5D%3D%5B...document.getElementsByTagName(%22iframe%22)%5D.filter(e%3D%3Ee.src.includes(%22slideslive.com%22))%3Bif(!e)return%20alert(%22Cannot%20find%20a%20SlidesLive%20video%20on%20the%20current%20page.%22)%2C!0%3Bconst%20t%3Dwindow.open(e.src%2C%22_blank%22)%3Breturn%20t%7C%7Calert(%22The%20popup%20window%20seems%20to%20be%20blocked.%5CnClick%20the%20popup%20icon%20in%20the%20address%20bar%20to%20continue.%22)%2Ct%26%26t.alert(%22Please%20run%20the%20bookmarklet%20again%20in%20this%20tab.%22)%2C!0%7D)())return%3Bconst%20n%3De()%3Bn.crossOrigin%3D%22anonymous%22%3Bconst%20i%3Dt()%2Co%3Ddocument.createElement(%22canvas%22)%2Cr%3Dn.clientWidth%2Fn.clientHeight%3Bo.width%3Di.height*r%2Bi.width%2Co.height%3Di.height%2Co.width*%3Dwindow.devicePixelRatio%2Co.height*%3Dwindow.devicePixelRatio%3Bconst%20a%3Ddocument.createElement(%22video%22)%3Ba.width%3D640%2Ca.width%3D480%2Ca.playsInline%3D!0%2Ca.autoplay%3D!0%2Cdocument.body.appendChild(a)%2Ca.srcObject%3Do.captureStream()%3Bconst%20d%3Do.getContext(%222d%22)%3Bif(!d)throw%20Error(%22Can&#x27;t%20get%20canvas%20context.%22)%3Bd.scale(window.devicePixelRatio%2Cwindow.devicePixelRatio)%3Bconst%20l%3D()%3D%3E%7Bvar%20n%3De()%3Bconst%20i%3Dt()%3Bo.height!%3D%3Di.height*window.devicePixelRatio%26%26(o.width%3D(i.height*r%2Bi.width)*window.devicePixelRatio%2Co.height%3Di.height*window.devicePixelRatio%2Cd.scale(window.devicePixelRatio%2Cwindow.devicePixelRatio))%2Cd.drawImage(n%2C0%2C0%2Ci.height*r%2Ci.height)%2Ci.crossOrigin%3D%22anonymous%22%2Cd.drawImage(i%2Ci.height*r%2C0%2Ci.width%2Ci.height)%7D%3Blet%20c%3Dn.requestVideoFrameCallback(l)%3Bvar%20s%2Cu%3Bs%3D()%3D%3E%7Bn.cancelVideoFrameCallback(c)%2Cc%3Dn.requestVideoFrameCallback(l)%7D%2Cu%3D1e3%2F120%2Cnew%20Worker(URL.createObjectURL(new%20Blob(%5B%60setInterval(()%20%3D%3E%20self.postMessage(null)%2C%20%24%7Bu%7D)%3B%60%5D))).onmessage%3D()%3D%3Es()%2Cn.requestVideoFrameCallback(l)%3Bconst%20h%3Ddocument.createElement(%22button%22)%3Bh.style.color%3D%22black%22%2Ch.style.backgroundColor%3D%22lightgray%22%2Ch.style.padding%3D%220.2em%22%2Ch.textContent%3D%22pip%22%2Cdocument.body.appendChild(h)%2Ch.addEventListener(%22click%22%2Casync()%3D%3E%7Bdocument.pictureInPictureEnabled%26%26a.requestPictureInPicture()%7D)%2Ca.addEventListener(%22pause%22%2C()%3D%3En.pause())%2Ca.addEventListener(%22play%22%2C()%3D%3En.play())%2Cn.addEventListener(%22play%22%2C()%3D%3Ea.play())%7D)()%7D%5D)%3B})()">SlidesLive PiP</a>
        </p> 
        <p>
          Drag this button to your bookmarks bar to save it as a bookmarklet.
        </p>
      </div>
        <p>See source at <br> <a href="https://github.com/gmatt/slideslive-picture-in-picture">https://github.com/gmatt/slideslive-picture-in-picture</a></p>
    </div>
  </body>
</html>
