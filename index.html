<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlidesLive Picture-in-Picture Bookmarklet</title>
    <style>
      html, body, div {
        text-align: center;
        margin: 0 auto;
        padding: 0;
        font: normal 16px/24px Helvetica Neue, Helvetica, sans-serif;
        color: #333;
      }
      #main {
        max-width: 630px;
        margin: 3em auto;
      }
      .bookmarklet {
        display: inline-block;
        padding: .5em 1em;
        color: #fff;
        background: #50dcf3;
        border-radius: 4px;
        text-decoration: none;
      }
      a {
        color: #50dcf3;
      }
      .dim {
        color: #999;
      }
      .bookmarkContainer {
        padding: 30px;
      }
    </style>
  </head>
  <body>
    <div id="main">
      <h1>SlidesLive Picture-in-Picture Bookmarklet</h1>
      <div class="bookmarkContainer">
        <p>
          <a class="bookmarklet" href="javascript:(function(){!function(e)%7Bvar%20t%3D%7B%7D%3Bfunction%20n(o)%7Bif(t%5Bo%5D)return%20t%5Bo%5D.exports%3Bvar%20r%3Dt%5Bo%5D%3D%7Bi%3Ao%2Cl%3A!1%2Cexports%3A%7B%7D%7D%3Breturn%20e%5Bo%5D.call(r.exports%2Cr%2Cr.exports%2Cn)%2Cr.l%3D!0%2Cr.exports%7Dn.m%3De%2Cn.c%3Dt%2Cn.d%3Dfunction(e%2Ct%2Co)%7Bn.o(e%2Ct)%7C%7CObject.defineProperty(e%2Ct%2C%7Benumerable%3A!0%2Cget%3Ao%7D)%7D%2Cn.r%3Dfunction(e)%7B%22undefined%22!%3Dtypeof%20Symbol%26%26Symbol.toStringTag%26%26Object.defineProperty(e%2CSymbol.toStringTag%2C%7Bvalue%3A%22Module%22%7D)%2CObject.defineProperty(e%2C%22__esModule%22%2C%7Bvalue%3A!0%7D)%7D%2Cn.t%3Dfunction(e%2Ct)%7Bif(1%26t%26%26(e%3Dn(e))%2C8%26t)return%20e%3Bif(4%26t%26%26%22object%22%3D%3Dtypeof%20e%26%26e%26%26e.__esModule)return%20e%3Bvar%20o%3DObject.create(null)%3Bif(n.r(o)%2CObject.defineProperty(o%2C%22default%22%2C%7Benumerable%3A!0%2Cvalue%3Ae%7D)%2C2%26t%26%26%22string%22!%3Dtypeof%20e)for(var%20r%20in%20e)n.d(o%2Cr%2Cfunction(t)%7Breturn%20e%5Bt%5D%7D.bind(null%2Cr))%3Breturn%20o%7D%2Cn.n%3Dfunction(e)%7Bvar%20t%3De%26%26e.__esModule%3Ffunction()%7Breturn%20e.default%7D%3Afunction()%7Breturn%20e%7D%3Breturn%20n.d(t%2C%22a%22%2Ct)%2Ct%7D%2Cn.o%3Dfunction(e%2Ct)%7Breturn%20Object.prototype.hasOwnProperty.call(e%2Ct)%7D%2Cn.p%3D%22%22%2Cn(n.s%3D0)%7D(%5Bfunction(e%2Ct)%7B(()%3D%3E%7Bconst%20e%3D()%3D%3Edocument.getElementsByTagName(%22video%22)%5B0%5D%2Ct%3D()%3D%3E%7Bconst%20e%3Ddocument.querySelector(%22.slp__slidesPlayer__content%20img%22)%3Bif(!(e%20instanceof%20HTMLImageElement))throw%20Error(%22Slide%20image%20not%20found.%22)%3Breturn%20e%7D%3Bif((()%3D%3E%7Bif(%22slideslive.com%22%3D%3D%3Dlocation.hostname)return!1%3Bconst%5Be%5D%3D%5B...document.getElementsByTagName(%22iframe%22)%5D.filter(e%3D%3Ee.src.includes(%22slideslive.com%22))%3Bif(!e)return%20alert(%22Cannot%20find%20a%20SlidesLive%20video%20on%20the%20current%20page.%22)%2C!0%3Bconst%20t%3Dwindow.open(e.src%2C%22_blank%22)%3Breturn%20t%7C%7Calert(%22The%20popup%20window%20seems%20to%20be%20blocked.%5CnClick%20the%20popup%20icon%20in%20the%20address%20bar%20to%20continue.%22)%2Ct%26%26t.alert(%22Please%20run%20the%20bookmarklet%20again%20in%20this%20tab.%22)%2C!0%7D)())return%3Bconst%20n%3De()%3Bn.crossOrigin%3D%22anonymous%22%3Bconst%20o%3Dt()%2Cr%3Ddocument.createElement(%22canvas%22)%3Br.width%3Dn.clientWidth%2Bo.width%2Cr.height%3DMath.max(n.clientHeight%2Co.height)%2Cr.width*%3Dwindow.devicePixelRatio%2Cr.height*%3Dwindow.devicePixelRatio%3Bconst%20i%3Ddocument.createElement(%22video%22)%3Bi.width%3D640%2Ci.width%3D480%2Ci.playsInline%3D!0%2Ci.autoplay%3D!0%2Cdocument.body.appendChild(i)%2Ci.srcObject%3Dr.captureStream()%3Bconst%20a%3Dr.getContext(%222d%22)%3Bif(!a)throw%20Error(%22Can&#x27;t%20get%20canvas%20context.%22)%3Ba.scale(window.devicePixelRatio%2Cwindow.devicePixelRatio)%3Bconst%20c%3D()%3D%3E%7Bvar%20o%3De()%3Ba.drawImage(o%2C0%2C0%2Co.clientWidth%2Co.clientHeight)%3Bconst%20r%3Dt()%3Br.crossOrigin%3D%22anonymous%22%2Ca.drawImage(r%2Cn.clientWidth%2C0%2Cr.width%2Cr.height)%7D%3Blet%20l%3Dn.requestVideoFrameCallback(c)%3Bvar%20d%2Cs%3Bd%3D()%3D%3E%7Bn.cancelVideoFrameCallback(l)%2Cl%3Dn.requestVideoFrameCallback(c)%7D%2Cs%3D1e3%2F120%2Cnew%20Worker(URL.createObjectURL(new%20Blob(%5B%60setInterval(()%20%3D%3E%20self.postMessage(null)%2C%20%24%7Bs%7D)%3B%60%5D))).onmessage%3D()%3D%3Ed()%2Cn.requestVideoFrameCallback(c)%3Bconst%20u%3Ddocument.createElement(%22button%22)%3Bu.style.color%3D%22black%22%2Cu.style.backgroundColor%3D%22lightgray%22%2Cu.style.padding%3D%220.2em%22%2Cu.textContent%3D%22pip%22%2Cdocument.body.appendChild(u)%2Cu.addEventListener(%22click%22%2Casync()%3D%3E%7Bdocument.pictureInPictureEnabled%26%26i.requestPictureInPicture()%7D)%2Ci.addEventListener(%22pause%22%2C()%3D%3En.pause())%2Ci.addEventListener(%22play%22%2C()%3D%3En.play())%2Cn.addEventListener(%22play%22%2C()%3D%3Ei.play())%7D)()%7D%5D)%3B})()">SlidesLive PiP</a>
        </p> 
        <p>
          Drag this button to your bookmarks bar to save it as a bookmarklet.
        </p>
      </div>
        <p>See source at <br> <a href="https://github.com/gmatt/slideslive-picture-in-picture">https://github.com/gmatt/slideslive-picture-in-picture</a></p>
    </div>
  </body>
</html>
